// Advanced Sentiment Analysis - Unit Tests// Run with: npx tsx lib/tools/evaluation-metrics/__tests__/advancedSentimentAnalysis.test.tsimport { getAdvancedSentimentAnalysis } from '../operations/advancedSentimentAnalysis';console.log('========================================');console.log('Advanced Sentiment Analysis - Unit Tests');console.log('========================================\n');// Test 1: Function exists and is callableconsole.log('Test 1: Function exists');console.log('----------------------------------------');if (typeof getAdvancedSentimentAnalysis !== 'function') {  throw new Error('getAdvancedSentimentAnalysis is not a function!');}console.log('✓ getAdvancedSentimentAnalysis function exists\n');// Test 2: Test with real date range (will need actual Supabase data)console.log('Test 2: Call with valid parameters');console.log('----------------------------------------');const testUserId = 'test-user-123';const startDate = new Date('2025-01-01');const endDate = new Date('2025-01-31');console.log('Parameters:');console.log('  userId:', testUserId);console.log('  startDate:', startDate.toISOString());console.log('  endDate:', endDate.toISOString());getAdvancedSentimentAnalysis(testUserId, startDate, endDate)  .then((result) => {    console.log('\nResult structure:');    console.log('  period:', result.period);    console.log('  totalAnalyzed:', result.totalAnalyzed);    console.log('  sentimentDistribution:', result.sentimentDistribution);    console.log('  emotionDetection:', result.emotionDetection);    console.log('  averageConfidence:', result.averageConfidence);    console.log('  topPhrases count:', result.topPhrases.length);    console.log('  insights count:', result.insights.length);        // Validate structure    if (!result.period) throw new Error('Missing period field');    if (typeof result.totalAnalyzed !== 'number') throw new Error('Invalid totalAnalyzed');    if (!result.sentimentDistribution) throw new Error('Missing sentimentDistribution');    if (!result.emotionDetection) throw new Error('Missing emotionDetection');    if (typeof result.averageConfidence !== 'number') throw new Error('Invalid averageConfidence');    if (!Array.isArray(result.topPhrases)) throw new Error('topPhrases not an array');    if (!Array.isArray(result.insights)) throw new Error('insights not an array');        console.log('✓ Test 2 passed - Valid response structure\n');        // Test 3: Validate sentiment distribution levels    console.log('Test 3: Sentiment distribution structure');    console.log('----------------------------------------');    const dist = result.sentimentDistribution;    const requiredLevels = ['veryPositive', 'positive', 'neutral', 'negative', 'veryNegative'];    requiredLevels.forEach(level => {      if (typeof dist[level as keyof typeof dist] !== 'number') {        throw new Error(`Missing or invalid sentiment level: ${level}`);      }    });    console.log('✓ Test 3 passed - All sentiment levels present\n');        // Test 4: Validate emotion detection    console.log('Test 4: Emotion detection structure');    console.log('----------------------------------------');    const emotions = result.emotionDetection;    const requiredEmotions = ['frustrated', 'confused', 'satisfied', 'delighted'];    requiredEmotions.forEach(emotion => {      if (typeof emotions[emotion as keyof typeof emotions] !== 'number') {        throw new Error(`Missing or invalid emotion: ${emotion}`);      }    });    console.log('✓ Test 4 passed - All emotions present\n');        // Test 5: Validate confidence range    console.log('Test 5: Confidence value range');    console.log('----------------------------------------');    if (result.averageConfidence < 0 || result.averageConfidence > 1) {      throw new Error(`Confidence out of range: ${result.averageConfidence}`);    }    console.log('✓ Test 5 passed - Confidence in valid range [0, 1]\n');        console.log('========================================');    console.log('All Advanced Sentiment Tests Passed! ✓');    console.log('========================================\n');  })  .catch((error) => {    console.error('\n✗ Test failed:', error.message);    console.error('Stack:', error.stack);    process.exit(1);  });